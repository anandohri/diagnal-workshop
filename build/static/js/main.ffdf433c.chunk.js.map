{"version":3,"sources":["display.js","index.js"],"names":["Display","query","pageNumber","useState","loading","setLoading","error","setError","movies","setMovies","hasMore","setHasMore","useEffect","axios","method","url","then","res","prevMovies","data","page","content","catch","err","Diagnal","setPageNumber","observer","useRef","lastMovieRef","useCallback","ele","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","className","src","alt","map","movie","ind","pth","length","ref","width","ReactDOM","render","document","getElementById"],"mappings":"0NA0CeA,MAvCf,SAAiBC,EAAOC,GACtB,MAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA0BF,oBAAS,GAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAA4BJ,mBAAS,IAArC,mBAAOK,EAAP,KAAeC,EAAf,KACA,EAA8BN,oBAAS,GAAvC,mBAAOO,EAAP,KAAgBC,EAAhB,KAgCA,OA9BAC,qBAAU,WAERP,GAAW,GACXE,GAAS,GAETM,IAAM,CACJC,OAAQ,MACRC,IAAK,gCAAkCb,EAAa,UACnDc,MAAK,SAAAC,GAENR,GAAU,SAAAS,GACR,MAAM,GAAN,mBAAWA,GAAX,YAA0BD,EAAIE,KAAKC,KAAK,iBAAiBC,aAG3DV,GAAW,WACT,OAAGM,EAAIE,KAAKC,KAAK,yBAA2BH,EAAIE,KAAKC,KAAK,yBAK5Df,GAAW,MAEViB,OAAM,SAAAC,GAEPhB,GAAS,QAIV,CAACL,IAEG,CAACE,UAASE,QAAOI,UAASF,W,OClCnC,SAASgB,IACP,MAA0BrB,mBAAS,IAAnC,mBAAOF,EAAP,KACA,GADA,KACoCE,mBAAS,IAA7C,mBAAOD,EAAP,KAAmBuB,EAAnB,KAOA,MAA0CzB,EAAQC,EAAOC,GAAlDM,EAAP,EAAOA,OAAQE,EAAf,EAAeA,QAASJ,EAAxB,EAAwBA,MAAOF,EAA/B,EAA+BA,QACzBsB,EAAWC,mBACXC,EAAeC,uBAAY,SAAAC,GAC5B1B,IAGAsB,EAASK,SACVL,EAASK,QAAQC,aAEnBN,EAASK,QAAU,IAAIE,sBAAqB,SAAAC,GACvCA,EAAQ,GAAGC,gBAAkBzB,GAC9Be,GAAc,SAAAW,GAAc,OAAIA,EAAiB,QAGlDN,GACDJ,EAASK,QAAQM,QAAQP,MAE1B,CAAC1B,EAASM,IAEb,OACE,sBAAK4B,UAAY,OAAjB,UACE,sBAAKA,UAAY,SAAjB,UACE,qBAAKA,UAAY,OAAOC,IAAM,oBAAoBC,IAAM,aACxD,sBAAMF,UAAY,SAAlB,6BACA,qBAAKA,UAAY,SAASC,IAAM,sBAAsBC,IAAM,kBAE9D,sBAAKF,UAAY,YAAjB,UACG9B,EAAOiC,KAAI,SAACC,EAAOC,GAClB,IAAIC,EAAiC,4BAA1BF,EAAM,gBAAiD,+CAAiD,YAAcA,EAAM,gBACvI,OAAGC,EAAM,IAAMnC,EAAOqC,OAElB,sBAAKP,UAAY,QAAQQ,IAAOlB,EAAhC,UACE,qBAAKU,UAAY,SAASC,IAAOK,EAAKJ,IAAOE,EAAK,KAAUK,MAAQ,SACpE,4BAAYT,UAAY,UAAxB,SAAmCI,EAAK,SAFWC,GAOrD,sBAAKL,UAAY,QAAjB,UACE,qBAAKA,UAAY,SAASC,IAAOK,EAAKJ,IAAOE,EAAK,KAAUK,MAAQ,SACpE,4BAAYT,UAAY,UAAxB,SAAmCI,EAAK,SAFVC,MAMtC,8BAAMvC,GAAW,eACjB,8BAAME,GAAS,gBAMvB0C,IAASC,OACP,cAACzB,EAAD,IACA0B,SAASC,eAAe,W","file":"static/js/main.ffdf433c.chunk.js","sourcesContent":["import {useState, useEffect} from 'react'\r\nimport axios from 'axios'\r\n\r\nfunction Display(query, pageNumber){\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(false)\r\n  const [movies, setMovies] = useState([])\r\n  const [hasMore, setHasMore] = useState(false)\r\n\r\n  useEffect(() => {\r\n\r\n    setLoading(true)\r\n    setError(false)\r\n\r\n    axios({\r\n      method: 'GET',\r\n      url: './API/CONTENTLISTINGPAGE-PAGE' + pageNumber + '.json'\r\n    }).then(res => {\r\n      \r\n      setMovies(prevMovies => {\r\n        return [...prevMovies, ...res.data.page['content-items'].content]\r\n      })\r\n\r\n      setHasMore(() => {\r\n        if(res.data.page['page-size-requested'] !== res.data.page['page-size-returned'])\r\n          return false\r\n        return true\r\n      })\r\n\r\n      setLoading(false)\r\n\r\n    }).catch(err => {\r\n\r\n      setError(true)\r\n\r\n    })\r\n\r\n  }, [pageNumber])\r\n\r\n  return {loading, error, hasMore, movies}\r\n}\r\n\r\nexport default Display;","import React, {useState, useRef, useCallback} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Display from './display';\n\nfunction Diagnal(){\n  const [query, setQuery] = useState('')\n  const [pageNumber, setPageNumber] = useState(1)\n\n  function handleSearch (e) {\n    setQuery(e.target.value)\n    setPageNumber(1)\n  }\n\n  const {movies, hasMore, error, loading} = Display(query, pageNumber)\n  const observer = useRef()\n  const lastMovieRef = useCallback(ele =>{\n    if(loading)\n      return\n\n    if(observer.current)\n      observer.current.disconnect()\n\n    observer.current = new IntersectionObserver(entries => {\n      if(entries[0].isIntersecting && hasMore)\n        setPageNumber(prevPageNumber => prevPageNumber + 1)\n    })\n\n    if(ele)\n      observer.current.observe(ele)\n    \n  }, [loading, hasMore])\n\n  return(\n    <div className = 'Home'>\n      <div className = 'NavBar'>\n        <img className = 'Back' src = './images/Back.png' alt = 'back.png' />\n        <text className = 'Filter'>ROMANTIC MOVIES</text>\n        <img className = 'Search' src = './images/search.png' alt = 'search.png'/>\n      </div>\n      <div className = 'allMovies'>\n        {movies.map((movie, ind) => {\n          let pth = (movie['poster-image'] === 'posterthatismissing.jpg') ? './images/placeholder_for_missing_posters.png' : './images/' + movie['poster-image']\n          if(ind + 4 === movies.length)\n            return(\n              <div className = 'Movie' ref = {lastMovieRef} key = {ind}>\n                <img className = 'Poster' src = {pth} alt = {movie['name']} width = '100%' />\n                <figcaption className = 'Caption'>{movie['name']}</figcaption>\n              </div>\n            )\n          else\n            return(\n              <div className = 'Movie' key = {ind}>\n                <img className = 'Poster' src = {pth} alt = {movie['name']} width = '100%' />\n                <figcaption className = 'Caption'>{movie['name']}</figcaption>\n              </div>\n            )\n        })}\n        <div>{loading && 'Loading...'}</div>\n        <div>{error && 'Error'}</div>\n      </div>  \n    </div>\n  )\n}\n\nReactDOM.render(\n  <Diagnal />,\n  document.getElementById('root')\n);"],"sourceRoot":""}